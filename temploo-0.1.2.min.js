/*
 Temploo.js: Tiny framework for HTML template
 version: 0.1.2

 NOTE: Make sure your document's has <meta charset="utf-8">

 By Ali Najafizadeh
 MIT Licensed.
*/
function Template(){this.CHAR_RETURN="________RETURN________";this.CHAR_ENTER="________ENTER________";this.CHAR_TAB="________TAB________";this.CONVERT_REFEX=/[\r\n\t]|(________RETURN________)|(________ENTER________)|(________TAB________)/g}Template.prototype.compile=function(str){var that=this,fn;str=this.toTemplate(str);str=this.makeFunctionString(str);str=this.convertAllValues(str);str=this.convertAllLogicStatements(str);fn=new Function(str);return function(model){if(model.summary&&model.summary.length>0){console.log(JSON.stringify(model,null,4))}var result=fn.call(model);return that.fromTemplate(result)}};Template.prototype.replace=function(str,arg1,arg2){return str.replace(arg1,arg2)};Template.prototype.toTemplate=function(str){var that=this;return this.replace(str,this.CONVERT_REFEX,function(value){switch(value){case"\n":return that.CHAR_ENTER;case"\r":return that.CHAR_RETURN;case"\t":return that.CHAR_TAB;default:return that.value}})};Template.prototype.fromTemplate=function(str){var that=this;return this.replace(str,this.CONVERT_REFEX,function(value){switch(value){case that.CHAR_ENTER:return"\n";case that.CHAR_RETURN:return"\r";case that.CHAR_TAB:return"\t";default:return that.value}})};Template.prototype.makeFunctionString=function(str){return'var str="'+this.replace(str,/"/g,'\\"')+'";return str;'};Template.prototype.convertAllValues=function(str){return this.replace(str,/<%=(.*?)%>/g,'"+$1+"')};Template.prototype.convertAllLogicStatements=function(str){return this.replace(str,/<%(.*?)%>/g,'";$1str+="')};
